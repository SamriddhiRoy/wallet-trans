{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samri\\\\wallet trans\\\\wallet\\\\src\\\\components\\\\Graph.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateNodePosition } from '../redux/graphSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Graph = ({\n  theme\n}) => {\n  _s();\n  const svgRef = useRef();\n  const dispatch = useDispatch();\n  const data = useSelector(state => state.graph.data);\n  const storedPositions = useSelector(state => state.graph.nodePositions);\n  useEffect(() => {\n    if (!data || !data.nodes || !data.links) return;\n    const width = 1000;\n    const height = 600;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    const container = svg.attr('viewBox', `0 0 ${width} ${height}`).append('g');\n\n    // Theme-based colors\n    const backgroundColor = theme === 'dark' ? '#1f2937' : '#ffffff';\n    const nodeColor = theme === 'dark' ? '#60a5fa' : '#1e40af';\n    const textColor = theme === 'dark' ? '#f9fafb' : '#1f2937';\n    const linkColor = theme === 'dark' ? '#94a3b8' : '#334155';\n    svg.style('background-color', backgroundColor);\n\n    // Zoom & pan\n    svg.call(d3.zoom().on('zoom', event => {\n      container.attr('transform', event.transform);\n    }));\n\n    // Set center node\n    const centerNode = data.nodes.find(n => n.type === 'center');\n    centerNode.fx = width / 2;\n    centerNode.fy = height / 2;\n    const inflow = data.nodes.filter(n => n.type === 'inflow');\n    const outflow = data.nodes.filter(n => n.type === 'outflow');\n    const gapY = 80;\n    const offsetX = 250;\n    inflow.forEach((node, i) => {\n      node.fx = centerNode.fx - offsetX;\n      node.fy = centerNode.fy + (i - inflow.length / 2) * gapY;\n    });\n    outflow.forEach((node, i) => {\n      node.fx = centerNode.fx + offsetX;\n      node.fy = centerNode.fy + (i - outflow.length / 2) * gapY;\n    });\n\n    // Restore stored positions\n    data.nodes.forEach(node => {\n      const stored = storedPositions[node.id];\n      if (stored) {\n        node.fx = stored.fx;\n        node.fy = stored.fy;\n      }\n    });\n    const simulation = d3.forceSimulation(data.nodes).force('link', d3.forceLink(data.links).id(d => d.id).distance(120)).force('charge', d3.forceManyBody().strength(-300)).force('center', d3.forceCenter(width / 2, height / 2)).on('tick', ticked);\n\n    // Links\n    const link = container.selectAll('line').data(data.links).enter().append('line').attr('stroke', linkColor).attr('stroke-width', 2);\n\n    // Nodes\n    const node = container.selectAll('circle').data(data.nodes).enter().append('circle').attr('r', 20).attr('fill', nodeColor).call(d3.drag().on('start', (event, d) => {\n      simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }).on('drag', (event, d) => {\n      d.fx = event.x;\n      d.fy = event.y;\n    }).on('end', (event, d) => {\n      simulation.alphaTarget(0);\n      dispatch(updateNodePosition({\n        id: d.id,\n        fx: d.fx,\n        fy: d.fy\n      }));\n    }));\n\n    // Labels\n    const labels = container.selectAll('text').data(data.nodes).enter().append('text').text(d => d.label || d.id).attr('font-size', 12).attr('fill', textColor).attr('text-anchor', 'middle').attr('dy', 4);\n    function ticked() {\n      link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n      node.attr('cx', d => d.x).attr('cy', d => d.y);\n      labels.attr('x', d => d.x).attr('y', d => d.y);\n    }\n    return () => simulation.stop();\n  }, [data, theme, dispatch, storedPositions]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: svgRef,\n    className: \"w-full h-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 10\n  }, this);\n};\n_s(Graph, \"MiLtf+VaxTPgc8uco6A9esH1uD0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Graph;\nexport default Graph;\nvar _c;\n$RefreshReg$(_c, \"Graph\");","map":{"version":3,"names":["React","useRef","useEffect","d3","useSelector","useDispatch","updateNodePosition","jsxDEV","_jsxDEV","Graph","theme","_s","svgRef","dispatch","data","state","graph","storedPositions","nodePositions","nodes","links","width","height","svg","select","current","selectAll","remove","container","attr","append","backgroundColor","nodeColor","textColor","linkColor","style","call","zoom","on","event","transform","centerNode","find","n","type","fx","fy","inflow","filter","outflow","gapY","offsetX","forEach","node","i","length","stored","id","simulation","forceSimulation","force","forceLink","d","distance","forceManyBody","strength","forceCenter","ticked","link","enter","drag","alphaTarget","restart","x","y","labels","text","label","source","target","stop","ref","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Samri/wallet trans/wallet/src/components/Graph.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateNodePosition } from '../redux/graphSlice';\n\nconst Graph = ({ theme }) => {\n  const svgRef = useRef();\n  const dispatch = useDispatch();\n  const data = useSelector((state) => state.graph.data);\n  const storedPositions = useSelector((state) => state.graph.nodePositions);\n\n  useEffect(() => {\n    if (!data || !data.nodes || !data.links) return;\n\n    const width = 1000;\n    const height = 600;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    const container = svg\n      .attr('viewBox', `0 0 ${width} ${height}`)\n      .append('g');\n\n    // Theme-based colors\n    const backgroundColor = theme === 'dark' ? '#1f2937' : '#ffffff';\n    const nodeColor = theme === 'dark' ? '#60a5fa' : '#1e40af';\n    const textColor = theme === 'dark' ? '#f9fafb' : '#1f2937';\n    const linkColor = theme === 'dark' ? '#94a3b8' : '#334155';\n\n    svg.style('background-color', backgroundColor);\n\n    // Zoom & pan\n    svg.call(\n      d3.zoom().on('zoom', (event) => {\n        container.attr('transform', event.transform);\n      })\n    );\n\n    // Set center node\n    const centerNode = data.nodes.find((n) => n.type === 'center');\n    centerNode.fx = width / 2;\n    centerNode.fy = height / 2;\n\n    const inflow = data.nodes.filter((n) => n.type === 'inflow');\n    const outflow = data.nodes.filter((n) => n.type === 'outflow');\n\n    const gapY = 80;\n    const offsetX = 250;\n\n    inflow.forEach((node, i) => {\n      node.fx = centerNode.fx - offsetX;\n      node.fy = centerNode.fy + (i - inflow.length / 2) * gapY;\n    });\n\n    outflow.forEach((node, i) => {\n      node.fx = centerNode.fx + offsetX;\n      node.fy = centerNode.fy + (i - outflow.length / 2) * gapY;\n    });\n\n    // Restore stored positions\n    data.nodes.forEach((node) => {\n      const stored = storedPositions[node.id];\n      if (stored) {\n        node.fx = stored.fx;\n        node.fy = stored.fy;\n      }\n    });\n\n    const simulation = d3\n      .forceSimulation(data.nodes)\n      .force('link', d3.forceLink(data.links).id((d) => d.id).distance(120))\n      .force('charge', d3.forceManyBody().strength(-300))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .on('tick', ticked);\n\n    // Links\n    const link = container\n      .selectAll('line')\n      .data(data.links)\n      .enter()\n      .append('line')\n      .attr('stroke', linkColor)\n      .attr('stroke-width', 2);\n\n    // Nodes\n    const node = container\n      .selectAll('circle')\n      .data(data.nodes)\n      .enter()\n      .append('circle')\n      .attr('r', 20)\n      .attr('fill', nodeColor)\n      .call(\n        d3\n          .drag()\n          .on('start', (event, d) => {\n            simulation.alphaTarget(0.3).restart();\n            d.fx = d.x;\n            d.fy = d.y;\n          })\n          .on('drag', (event, d) => {\n            d.fx = event.x;\n            d.fy = event.y;\n          })\n          .on('end', (event, d) => {\n            simulation.alphaTarget(0);\n            dispatch(updateNodePosition({ id: d.id, fx: d.fx, fy: d.fy }));\n          })\n      );\n\n    // Labels\n    const labels = container\n      .selectAll('text')\n      .data(data.nodes)\n      .enter()\n      .append('text')\n      .text((d) => d.label || d.id)\n      .attr('font-size', 12)\n      .attr('fill', textColor)\n      .attr('text-anchor', 'middle')\n      .attr('dy', 4);\n\n    function ticked() {\n      link\n        .attr('x1', (d) => d.source.x)\n        .attr('y1', (d) => d.source.y)\n        .attr('x2', (d) => d.target.x)\n        .attr('y2', (d) => d.target.y);\n\n      node.attr('cx', (d) => d.x).attr('cy', (d) => d.y);\n\n      labels.attr('x', (d) => d.x).attr('y', (d) => d.y);\n    }\n\n    return () => simulation.stop();\n  }, [data, theme, dispatch, storedPositions]);\n\n  return <svg ref={svgRef} className=\"w-full h-full\" />;\n};\n\nexport default Graph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}