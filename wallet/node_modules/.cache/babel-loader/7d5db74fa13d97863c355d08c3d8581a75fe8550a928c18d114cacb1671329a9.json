{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Samri\\\\wallet trans\\\\wallet\\\\src\\\\components\\\\Graph.js\",\n  _s = $RefreshSig$();\n// src/components/Graph.js\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateNodePosition, setNodePositions } from '../redux/graphSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Graph = ({\n  data\n}) => {\n  _s();\n  const svgRef = useRef();\n  const dispatch = useDispatch();\n  const nodePositions = useSelector(state => state.graph.nodePositions);\n  const themeMode = useSelector(state => state.theme.mode);\n  useEffect(() => {\n    if (!data || !data.nodes || !data.links) return;\n    const width = 1200;\n    const height = 800;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove(); // clear svg\n\n    const zoom = d3.zoom().scaleExtent([0.1, 3]).on('zoom', event => {\n      g.attr('transform', event.transform);\n    });\n    svg.call(zoom);\n    const g = svg.append('g');\n    const link = g.append('g').attr('stroke', '#999').attr('stroke-opacity', 0.6).selectAll('line').data(data.links).join('line').attr('stroke-width', 2).attr('marker-end', 'url(#arrow)');\n\n    // Define arrow marker\n    svg.append('defs').append('marker').attr('id', 'arrow').attr('viewBox', '0 -5 10 10').attr('refX', 15).attr('refY', 0).attr('markerWidth', 6).attr('markerHeight', 6).attr('orient', 'auto').append('path').attr('d', 'M0,-5L10,0L0,5').attr('fill', '#999');\n    const node = g.append('g').selectAll('circle').data(data.nodes).join('circle').attr('r', 12).attr('fill', d => d.color || (themeMode === 'dark' ? '#0ff' : '#07f')).call(drag(simulation));\n    const label = g.append('g').selectAll('text').data(data.nodes).join('text').text(d => d.label).attr('font-size', 12).attr('text-anchor', 'middle').attr('dy', -18).attr('fill', themeMode === 'dark' ? '#fff' : '#000');\n    const simulation = d3.forceSimulation(data.nodes).force('link', d3.forceLink(data.links).id(d => d.id).distance(120)).force('charge', d3.forceManyBody().strength(-300)).force('center', d3.forceCenter(width / 2, height / 2)).on('tick', ticked);\n\n    // Restore node positions from Redux\n    data.nodes.forEach(node => {\n      const saved = nodePositions[node.id];\n      if (saved) {\n        node.fx = saved.fx;\n        node.fy = saved.fy;\n      }\n    });\n    function ticked() {\n      link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n      node.attr('cx', d => d.x).attr('cy', d => d.y);\n      label.attr('x', d => d.x).attr('y', d => d.y);\n    }\n    function drag(simulation) {\n      function dragstarted(event, d) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n      function dragged(event, d) {\n        d.fx = event.x;\n        d.fy = event.y;\n      }\n      function dragended(event, d) {\n        if (!event.active) simulation.alphaTarget(0);\n        dispatch(updateNodePosition({\n          id: d.id,\n          fx: d.fx,\n          fy: d.fy\n        }));\n      }\n      return d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended);\n    }\n    return () => simulation.stop();\n  }, [data, dispatch, nodePositions, themeMode]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-full\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      viewBox: \"0 0 1200 800\",\n      className: \"w-full h-full\",\n      style: {\n        backgroundColor: themeMode === 'dark' ? '#121212' : '#ffffff',\n        transition: 'background-color 0.3s ease'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(Graph, \"bNMJhH+ANgf6nnEfbJfto8hqZJQ=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Graph;\nexport default Graph;\nvar _c;\n$RefreshReg$(_c, \"Graph\");","map":{"version":3,"names":["React","useEffect","useRef","d3","useDispatch","useSelector","updateNodePosition","setNodePositions","jsxDEV","_jsxDEV","Graph","data","_s","svgRef","dispatch","nodePositions","state","graph","themeMode","theme","mode","nodes","links","width","height","svg","select","current","selectAll","remove","zoom","scaleExtent","on","event","g","attr","transform","call","append","link","join","node","d","color","drag","simulation","label","text","forceSimulation","force","forceLink","id","distance","forceManyBody","strength","forceCenter","ticked","forEach","saved","fx","fy","source","x","y","target","dragstarted","active","alphaTarget","restart","dragged","dragended","stop","className","children","ref","viewBox","style","backgroundColor","transition","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Samri/wallet trans/wallet/src/components/Graph.js"],"sourcesContent":["// src/components/Graph.js\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateNodePosition, setNodePositions } from '../redux/graphSlice';\n\nconst Graph = ({ data }) => {\n  const svgRef = useRef();\n  const dispatch = useDispatch();\n\n  const nodePositions = useSelector((state) => state.graph.nodePositions);\n  const themeMode = useSelector((state) => state.theme.mode);\n\n  useEffect(() => {\n    if (!data || !data.nodes || !data.links) return;\n\n    const width = 1200;\n    const height = 800;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove(); // clear svg\n\n    const zoom = d3.zoom()\n      .scaleExtent([0.1, 3])\n      .on('zoom', (event) => {\n        g.attr('transform', event.transform);\n      });\n\n    svg.call(zoom);\n\n    const g = svg.append('g');\n\n    const link = g.append('g')\n      .attr('stroke', '#999')\n      .attr('stroke-opacity', 0.6)\n      .selectAll('line')\n      .data(data.links)\n      .join('line')\n      .attr('stroke-width', 2)\n      .attr('marker-end', 'url(#arrow)');\n\n    // Define arrow marker\n    svg.append('defs').append('marker')\n      .attr('id', 'arrow')\n      .attr('viewBox', '0 -5 10 10')\n      .attr('refX', 15)\n      .attr('refY', 0)\n      .attr('markerWidth', 6)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto')\n      .append('path')\n      .attr('d', 'M0,-5L10,0L0,5')\n      .attr('fill', '#999');\n\n    const node = g.append('g')\n      .selectAll('circle')\n      .data(data.nodes)\n      .join('circle')\n      .attr('r', 12)\n      .attr('fill', d => d.color || (themeMode === 'dark' ? '#0ff' : '#07f'))\n      .call(drag(simulation));\n\n    const label = g.append('g')\n      .selectAll('text')\n      .data(data.nodes)\n      .join('text')\n      .text(d => d.label)\n      .attr('font-size', 12)\n      .attr('text-anchor', 'middle')\n      .attr('dy', -18)\n      .attr('fill', themeMode === 'dark' ? '#fff' : '#000');\n\n    const simulation = d3.forceSimulation(data.nodes)\n      .force('link', d3.forceLink(data.links).id(d => d.id).distance(120))\n      .force('charge', d3.forceManyBody().strength(-300))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .on('tick', ticked);\n\n    // Restore node positions from Redux\n    data.nodes.forEach(node => {\n      const saved = nodePositions[node.id];\n      if (saved) {\n        node.fx = saved.fx;\n        node.fy = saved.fy;\n      }\n    });\n\n    function ticked() {\n      link\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n\n      node\n        .attr('cx', d => d.x)\n        .attr('cy', d => d.y);\n\n      label\n        .attr('x', d => d.x)\n        .attr('y', d => d.y);\n    }\n\n    function drag(simulation) {\n      function dragstarted(event, d) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n\n      function dragged(event, d) {\n        d.fx = event.x;\n        d.fy = event.y;\n      }\n\n      function dragended(event, d) {\n        if (!event.active) simulation.alphaTarget(0);\n        dispatch(updateNodePosition({ id: d.id, fx: d.fx, fy: d.fy }));\n      }\n\n      return d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended);\n    }\n\n    return () => simulation.stop();\n  }, [data, dispatch, nodePositions, themeMode]);\n\n  return (\n    <div className=\"w-full h-full\">\n      <svg\n        ref={svgRef}\n        viewBox=\"0 0 1200 800\"\n        className=\"w-full h-full\"\n        style={{\n          backgroundColor: themeMode === 'dark' ? '#121212' : '#ffffff',\n          transition: 'background-color 0.3s ease',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Graph;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}